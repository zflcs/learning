# 2024 暑假日常

## TODO

- [ ] 处理 ZJP 对 rCore-N 的修改
- [ ] 完成对 starry 的修改
- [ ] 前两篇论文工作的总结，以及后续投稿

## 20240726

- [x] debug，找出切换过程中存在的问题
  - 在多核 fifo 调度器下，出现了其中一个任务试图释放另一个任务正在占用的锁，但这两个任务是在同一个核上运行，主要的问题还是出在切换的逻辑上
  - 在加入了 Utrap 上下文类型切换后，通过系统调用进入到内核后，会重新打开中断，导致会发生时钟中断，这个过程可能会被再次打断，这种情况下必须要考虑上下文嵌套的影响，会导致指针乱飞，不能恢复正常的执行
  - 出现了 PC 指针乱飞的情况，main_coroutine 不应该会出现调用同步的 wait 接口，但莫名其妙的调用了 wait，将自己阻塞了，并且其他核也莫名奇妙的调用了 wakeup_task 函数，应该还是线程切换时，上下文没有正确保存
- 