
### 基于 DMA 的硬件处理中断方案

#### DMA 使用

1. 软件需要将 `buffer` 指针传递给 `DMA` 驱动，而软件需要保证 `buffer` 不会被移动、销毁等。
2. `DMA` 传输完成后，通过某种机制通知软件，软件将 `buffer` 回收。


#### 软件获取信息的机制

1. 轮询 DMA 的状态寄存器
2. 中断

#### DMA 与协程结合

1. 协程先将 buffer 提交给 `DMA` ，之后通过 `await` 让权
2. `DMA` 的中断信号产生后，唤醒协程


#### 协程唤醒机制

1. 软件唤醒机制：通过 `waker` 的 `wake` 方法，将协程的任务指针添加到 `Executor` 就绪队列
2. 硬件唤醒机制：直接将任务指针添加到 `Executor` 就绪队列

#### 硬件唤醒协程存在的问题

1. 如何获取协程任务的指针：先注册中断向量表，硬件中的寄存器保存中断向量表基址，根据 irq 获取协程任务指针

