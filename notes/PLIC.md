平台级别中断控制器（Platform Level Interrupt Controller）

##### 中断目标
- 理论上支持一个或任意多个中断目标
- 中断目标通常为 Hart，也可以是系统内的其他组件
- 每个中断目标均可以设置特定的优先级阈值，只有中断源的优先级高于此阈值，中断才能被发送到中断目标
- 中断目标的优先级阈值寄存器通过存储器地址映射方式，可以进行读写

##### 中断源
- 理论上可以支持任意多个中断源（可以电平触发或者边沿触发）
- 为每个中断源分配了以下组件
	- Gateway 和 IP：每个 gateway 存在对应的中断等待寄存器，将不同触发类型的外部中断转换成统一的内部中断请求，一次只发送一个中断请求，硬件自动将 IP 位置为高位，后续的中断会被屏蔽
	- 编号：为每个中断源分配的一个 ID
	- 优先级：存储器地址映射方式，软件可编程设定优先级
	- 使能：同优先级，可以软件编程打开、关闭中断使能

##### 中断通知机制
- 中断必须满足以下要求才能参与中断仲裁
	- 中断必须使能
	- 中断源的优先级必须大于 0
	- 中断源必须经过了 gateway 发送（IP 置为 1）
- 从所有参与中断仲裁的中断源中选出优先级最高者，若同时存在相同优先级，则选择 ID 较小者
- 仲裁出的中断源的优先级必须高于中断目标的优先级阈值，才发送中断通知，否则不产生中断通知
- 对目标产生中断通知，则向目标生成一根电平触发的中断线

##### 中断响应机制
- 中断目标收到中断通知，并决定进行响应，则需要向 PLIC 发送中断响应消息
- PLIC 实现一个存储器地址映射的寄存器，中断目标读取该寄存器达到中断响应的目的，这个读操作将会返回 ID，表示当前仲裁出的中断源的 ID，通过这个 ID 知晓需要响应的具体的中断源
- PLIC 收到中断响应寄存器的读操作，并返回 ID 之后，将对应的中断源的 IP 寄存器清 0。之后，PLIC 可以继续仲裁，发送新的中断通知
- 中断目标可以将中断目标的优先级阈值设置到最高，屏蔽所有的中断。但该中断目标仍然可以对 PLIC 发起中断响应寄存器的读取操作，PLIC 依然会返回 ID（中断目标主动向 PLIC 发起？？？）

##### 中断完成机制
- 若彻底完成中断处理操作，则中断目标向 PLIC 发送中断完成消息
- PLIC 实现一个存储器地址映射的寄存器，中断目标对这个寄存器进行写操作，写入中断 ID，表示完成对应的中断处理
- PLIC 收到写操作之后，接触对应的中断源的 gateway