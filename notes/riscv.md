## riscv 

### 汇编语言



### 发生中断时的硬件流程

- 把发生中断或异常的 PC 压入到 sepc，将 pc 值设置为 stvec 寄存器中的值
- 根据异常的类型设置 sstatus 和 stval 寄存器
- 把 sstatus 寄存器中的 SIE 位置 0，屏蔽中断，将 SIE 之前的值保存在 SPIE 中
- 发生中断或异常的权限模式被保存在 SPP 字段中，将当前模式设置为 S 模式

### 中断返回时的硬件流程

- sret 将 PC 设置成 sepc
- 将 sstatus 寄存器中的 SPIE 字段复制到 SIE 字段，恢复之前的中断使能，设置 SPP 字段为 U 模式

### 虚拟地址

- V 表示有效

- R、W、X 若全为 0，则表示指向下一级页表的指针

- U 表示用户位

- G 表示这个映射是否对所有虚拟空间有效，通常只属于操作系统的页面

- A 表示访问位

- D 表示是否被弄脏

  